<odoo>
  <data>
    <record model="ir.ui.view" id="huroos_shippypro_connector_shippypro_stock_picking">
      <field name="name">huroos_shippypro_connector_shippypro_stock_picking</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="stock.view_picking_form" />
        <field name="arch" type="xml">
        <xpath position="before" expr="//notebook">
          <field name="is_customer_location_usage" invisible="1"/>
          <field name="is_shipping_auto_confirm" invisible="1"/>
          <group  string="Shippy PRO" >
            <group  attrs="{'invisible':['|', ('shippy_pro_sent_date','!=',False), ('is_shipping_auto_confirm','!=',False)]}">
              <field name="carrier"/>
              <button icon="fa-truck" string="Create shipping in ShippyPro" type="object" name="start_shippypro_routine" class="btn-link" />
            </group>
            <group  attrs="{'invisible':['|', ('shippy_pro_sent_date','!=',False), ('is_shipping_auto_confirm','=',False)]}">
              <field name="carrier"/>
              <button icon="fa-truck" string="Send with ShippyPro" type="object" name="start_shippypro_routine" class="btn-link" />
            </group>
            <group attrs="{'invisible':[('shippy_pro_sent_date','=',False)]}">
              <field name="carrier"/>
              <field name="shippy_pro_sent_date"/>
              <field name="shippy_pro_estimated_arrival_date"/>
              <field name="shippy_pro_order_number"/>
            </group>
            <group attrs="{'invisible':[('shippy_pro_sent_date','=',False)]}">
              <field name="label_url" widget="url"/>
              <field name="shippy_pro_tracking_number"/>
              <field name="shippy_pro_tracking_external_link" widget="url"/>
              <xpath expr="//field[@name='carrier_tracking_ref']" position="move"/>
            </group>
          </group>
        </xpath>
      </field>
    </record>

    <record model="ir.ui.view" id="huroos_shippypro_connector_view_picking_withcarrier_out_form">
      <field name="name">huroos_shippypro_connector_view_picking_withcarrier_out_form</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="delivery.view_picking_withcarrier_out_form" />
        <field name="arch" type="xml">
        <xpath expr="//field[@name='carrier_id']" position="attributes">
          <attribute name="attrs">{'readonly':False}</attribute>
        </xpath>
        <xpath expr="//field[@name='carrier_tracking_ref']" position="attributes">
          <attribute name="attrs">{'readonly':False}</attribute>
        </xpath>
      </field>
    </record>

    <record model="ir.ui.view" id="huroos_shippypro_connector_shippypro_stock_picking_tree">
      <field name="name">huroos_shippypro_connector_shippypro_stock_picking_tree</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="stock.vpicktree" />
        <field name="arch" type="xml">
        <xpath position="after" expr="//field[@name='origin']">
          <field name="shippy_pro_order_number"/>
          <field name="shippy_pro_tracking_number" optional="hide"/>
        </xpath>
      </field>
    </record>
  </data>
</odoo>