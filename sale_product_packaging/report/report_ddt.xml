<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template inherit_id="l10n_it_delivery_note.delivery_note_report_template" id="delivery_note_report_template">
        <xpath expr="//tbody[@class='sale_tbody']/t" position="before">
            <t t-set="lines" t-value="doc.line_ids"/>
        </xpath>
        <xpath expr="//tbody[@class='sale_tbody']/t[2]" position="attributes">
            <attribute name="t-foreach">lines.filtered(lambda l: l.product_id.hide_in_doc is False)</attribute>
        </xpath>


    </template>
    <template inherit_id="account.report_invoice_document" id="report_invoice_document">
        <xpath expr="//tbody[@class='invoice_tbody']/t[2]" position="after">
            <t t-set="lines" t-value="lines.filtered(lambda l: l.product_id.hide_in_doc is False)"/>
        </xpath>



    </template>
</odoo>